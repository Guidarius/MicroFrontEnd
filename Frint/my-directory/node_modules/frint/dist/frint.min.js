!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("rxjs/BehaviorSubject"),require("rxjs/observable/of"),require("rxjs/operator/concatMap"),require("rxjs/operator/find"),require("rxjs/operator/map"),require("rxjs/operator/first"),require("lodash/omit"),require("lodash/get"),require("lodash/find"),require("lodash/findIndex"),require("lodash/merge")):"function"==typeof define&&define.amd?define(["rxjs/BehaviorSubject","rxjs/observable/of","rxjs/operator/concatMap","rxjs/operator/find","rxjs/operator/map","rxjs/operator/first","lodash/omit","lodash/get","lodash/find","lodash/findIndex","lodash/merge"],t):"object"==typeof exports?exports.Frint=t(require("rxjs/BehaviorSubject"),require("rxjs/observable/of"),require("rxjs/operator/concatMap"),require("rxjs/operator/find"),require("rxjs/operator/map"),require("rxjs/operator/first"),require("lodash/omit"),require("lodash/get"),require("lodash/find"),require("lodash/findIndex"),require("lodash/merge")):e.Frint=t(e.Rx,e.Rx.Observable,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e._.omit,e._.get,e._.find,e._.findIndex,e._.merge)}(this,function(e,t,r,n,o,i,s,a,p,u,l){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])||!e&&!t)return"default";var r="";return e&&(r=e),t&&(r=e+"_"+t),r}function i(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.options=s({name:null,parentApp:null,providers:[],providerNames:{component:"component",container:"container",store:"store",app:"app",parentApp:"parentApp",rootApp:"rootApp",region:"region"},initialize:function(){},beforeDestroy:function(){}},t),!this.options.name)throw new Error("Must provide `name` in options");var r=(0,x.createContainer)([{name:this.options.providerNames.app,useDefinedValue:this},{name:this.options.providerNames.parentApp,useDefinedValue:this.getParentApp()},{name:this.options.providerNames.rootApp,useDefinedValue:this.getRootApp()}],{containerKey:this.options.providerNames.container});this.container=(0,x.resolveContainer)(r),this._registerRootProviders(),this.options.providers.forEach(function(t){e.container.register(t)}),this._appsCollection=[],this._apps$=new a.BehaviorSubject(this._appsCollection),this.options.initialize.bind(this)()}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(2),p=r(3),u=r(4),l=r(5),f=r(6),c=r(7),d=r(8),h=n(d),v=r(9),y=n(v),g=r(10),b=n(g),m=r(11),_=n(m),x=r(12);i.prototype._registerRootProviders=function(){var e=this,t=this.getParentApps();0!==t.length&&t.reverse().forEach(function(t){t.getProviders().forEach(function(r){if(r.cascade){var n=Object.assign({},(0,h.default)(r,["useClass","useValue","useFactory"]));return r.scoped?"useValue"in r?void e.container.register(s({},n,{useValue:t.get(r.name)})):"useClass"in r?void e.container.register(s({},n,{useClass:r.useClass})):void("useFactory"in r&&e.container.register(s({},n,{useFactory:r.useFactory}))):void e.container.register(s({},n,{useValue:t.get(r.name)}))}})})},i.prototype.getContainer=function(){return this.container},i.prototype.getRootApp=function(){var e=this.getParentApps();return 0===e.length?this:e.pop()},i.prototype.getParentApp=function(){return this.options[this.options.providerNames.parentApp]||null},i.prototype.getParentApps=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.getParentApp();return n?(r.push(n),e(n,r)):r}return e(this)},i.prototype.getOption=function(e){return(0,y.default)(this.options,e)},i.prototype.getName=function(){return this.getOption("name")},i.prototype.getProviders=function(){return this.options.providers},i.prototype.getProvider=function(e){return(0,b.default)(this.options.providers,function(t){return t.name===e})},i.prototype.get=function(e){var t=this.container.get(e);return void 0!==t?t:null},i.prototype.getApps$=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?(e=this._apps$,f.map).call(e,function(e){return e.filter(function(e){return e.regions.indexOf(t)>-1})}):this._apps$},i.prototype.registerApp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s({multi:!1},t);if(void 0!==r.name&&Object.defineProperty(e,"frintAppName",{value:r.name,configurable:!0}),-1!==(0,_.default)(this._appsCollection,function(t){return t.name===e.frintAppName}))throw new Error("App '"+e.frintAppName+"' has been already registered before.");this._appsCollection.push(s({},r,{name:e.frintAppName,App:e,regions:r.regions||[],instances:{}})),!1===r.multi&&this.instantiateApp(e.frintAppName),this._apps$.next(this._appsCollection)},i.prototype.hasAppInstance=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.getAppInstance(e,t,r);return!(!n||void 0===n)},i.prototype.getAppInstance=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=(0,_.default)(this._appsCollection,function(t){return t.name===e});if(-1===n)return null;var i=this._appsCollection[n],s=o(t,r,i.multi),a=i.instances[s];return a&&void 0!==a?a:null},i.prototype.getAppOnceAvailable$=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.getRootApp(),s=i.getAppInstance(e,r,n);return s?(0,p.of)(s):(t=(t=(t=(t=i._apps$,u.concatMap).call(t,function(e){return e}),l.find).call(t,function(t){return t.name===e}),f.map).call(t,function(e){var t=o(r,n,e.multi);return e.instances[t]}),c.first).call(t,function(e){return e})},i.prototype.instantiateApp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=(0,_.default)(this._appsCollection,function(t){return t.App.frintAppName===e});if(-1===n)throw new Error("No app found with name '"+e+"'.");var i=this._appsCollection[n],a=o(t,r,i.multi);return this._appsCollection[n].instances[a]=new i.App(s({},(0,h.default)(i,["App","instances"]),{name:i.App.frintAppName,parentApp:this})),this._appsCollection[n].instances[a]},i.prototype.destroyApp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=(0,_.default)(this._appsCollection,function(t){return!(!t||!t.App)&&t.App.frintAppName===e});if(-1===n)throw new Error("No app found with name '"+e+"'.");var i=this._appsCollection[n],s=o(t,r,i.multi);if(void 0===this._appsCollection[n].instances[s])throw new Error("No instance with key '"+s+"' found for app with name '"+e+"'.");this._appsCollection[n].instances[s].beforeDestroy(),delete this._appsCollection[n].instances[s]},i.prototype.beforeDestroy=function(){return this.options.beforeDestroy.bind(this)()},t.default=i,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i=n(o),s=r(17),a=n(s),p={App:i.default,createApp:a.default};t.default=p,e.exports=t.default},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t){e.exports=s},function(e,t){e.exports=a},function(e,t){e.exports=p},function(e,t){e.exports=u},function(e,t,r){var n=r(13);e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=r(14),i=n(o),s=r(15),a=n(s),p=r(16),u=n(p);e.exports={createContainer:i.default,resolveContainer:a.default,createClass:u.default}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a({containerName:"container"},t);return function(){function t(){var o=this;n(this,t),this.registry={},Object.defineProperty(this.registry,r.containerName,{get:function(){return o}}),e.forEach(function(e){o.register(e)})}return s(t,[{key:"getDeps",value:function(e){var t=this,r=e.name,n={};return Array.isArray(e.deps)?e.deps.forEach(function(e){if(!(e in t.registry))throw new Error("For provider '"+r+"', dependency '"+e+"' is not available yet.");n[e]=t.registry[e]}):"object"===i(e.deps)&&Object.keys(e.deps).forEach(function(o){if(!(o in t.registry))throw new Error("For provider '"+r+"', dependency '"+o+"' is not available yet.");var i=e.deps[o];n[i]=t.registry[o]}),n}},{key:"register",value:function(e){if("string"!=typeof e.name)throw new Error("Provider has no 'name' key.");var t=e.name;if("useValue"in e)this.registry[t]=e.useValue;else if("useFactory"in e)this.registry[t]=e.useFactory(this.getDeps(e));else if("useClass"in e)this.registry[t]=new e.useClass(this.getDeps(e));else{if(!("useDefinedValue"in e))throw new Error("No value given for '"+t+"' provider.");Object.defineProperty(this.registry,t,{get:function(){return e.useDefinedValue}})}}},{key:"get",value:function(e){return this.registry[e]}}]),t}()}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=o},function(e,t,r){"use strict";function n(e){return new e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function t(){var r=this;n(this,t),Object.keys(e).forEach(function(t){"function"==typeof e[t]?r[t]=e[t].bind(r):r[t]=e[t]}),"function"==typeof this.initialize&&this.initialize.apply(this,arguments)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(t){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,(0,u.default)(e,t)))}return s(r,t),r}(f.default);return void 0!==e.name&&Object.defineProperty(t,"frintAppName",{value:e.name,configurable:!0}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var p=r(18),u=n(p),l=r(0),f=n(l);e.exports=t.default},function(e,t){e.exports=l}])});